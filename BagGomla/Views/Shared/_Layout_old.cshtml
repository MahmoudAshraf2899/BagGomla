@using BagGomla.Helper;
@using BagGomla.LocalResource;
@using IdentityLibrary.DataModel;
@using Microsoft.AspNet.Identity;
@{
    var lang = System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.CultureName;

    DatabaseContext db = new DatabaseContext();
    List<string> ShoppingCartCollection = TagHelper.GetCookiesCollection(Request.Cookies["Cart"]).ToList();
    var ProductCollection = db.FWYProduct.Where(c => c.IsDeleted == false).ToList();
    var ProductList = new List<BagGomla.Models.ShoppingCartStruct>();
    foreach (var item in ShoppingCartCollection)
    {
        var SplitShopCart = item.Split('-');

        foreach (var item2 in ProductCollection)
        {
            if (SplitShopCart[0] == (item2.ID).ToString())
            {
                if (SplitShopCart.Length > 0)
                {
                    if (!SplitShopCart[1].Equals("") && !SplitShopCart[2].Equals(""))
                    {
                        int sizeid = int.Parse(SplitShopCart[1]);
                        int colorid = int.Parse(SplitShopCart[2]);
                        var Colors = db.FWYColor.FirstOrDefault(c => c.ID == colorid);
                        var Sizes = db.FWYSize.FirstOrDefault(c => c.ID == sizeid);
                        ProductList.Add(new BagGomla.Models.ShoppingCartStruct(item2, sizeid, colorid, Colors, Sizes));
                    }
                    else
                    {
                        ProductList.Add(new BagGomla.Models.ShoppingCartStruct(item2, 0, 0, null, null));
                    }
                }
            }
        }
    }


    var SupplierID = "";
    var SupplierCompanyID = 0;
    var IsAccepted = false;
    var user = new AspNetUsers();
    var Notifications = new List<FWYNotification>();
    if (User.Identity.IsAuthenticated)
    {
        var userID = User.Identity.GetUserId();
        user = db.AspNetUsers.SingleOrDefault(c => c.Id == userID);
        if (user.IsSupplier == true)
        {
            SupplierID = userID;
            if (user.FWYSupplierCooperation.Count > 0)
            {
                SupplierCompanyID = user.FWYSupplierCooperation.First().ID;
                IsAccepted = user.FWYSupplierCooperation.First().IsAccepted;
            }
        }
        else
        {
            if (userID == "1cc2ede9-5bc0-41e2-be52-801a844f1819")
            {
                SupplierID = "0";
            }
        }
        Notifications = db.FWYNotification.Where(c => c.SendTo == userID && c.IsManual == false).ToList();
        Notifications.Reverse();
    }
}



@* dir="@(System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft? "rtl" : "ltr")" *@
<!DOCTYPE html>
<html dir="@(System.Threading.Thread.CurrentThread.CurrentCulture.TextInfo.IsRightToLeft? "rtl" : "ltr")">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>@ViewBag.Title</title>
@*@Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")*@
<link href="~/Content/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
<link href="~/Scripts/fonts/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="~/Scripts/fonts/iconic/css/material-design-iconic-font.min.css" rel="stylesheet" />
<link href="~/Scripts/fonts/linearicons-v1.0.0/icon-font.min.css" rel="stylesheet" />
<link href="~/Content/vendor/animate/animate.css" rel="stylesheet" />
<link href="~/Content/vendor/css-hamburgers/hamburgers.min.css" rel="stylesheet" />
<link href="~/Content/vendor/animsition/css/animsition.min.css" rel="stylesheet" />
<link href="~/Content/vendor/select2/select2.min.css" rel="stylesheet" />
<link href="~/Content/vendor/daterangepicker/daterangepicker.css" rel="stylesheet" />
<link href="~/Content/vendor/slick/slick.css" rel="stylesheet" />
<link href="~/Content/vendor/MagnificPopup/magnific-popup.css" rel="stylesheet" />
<link href="~/Content/vendor/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" />
<link href="~/Content/css/util.css" rel="stylesheet" />
<link href="~/Content/css/main.css" rel="stylesheet" />
<link href="~/Content/css/ayman.css" rel="stylesheet" />
<link href="~/Content/css/ayman2.css" rel="stylesheet" />

<link href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.1.0/css/flag-icon.min.css" rel="stylesheet">
<style>
    .simple-marquee-container * {
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        -o-box-sizing: border-box;
        box-sizing: border-box;
        font-family: "Poppins-Regular", "Helvetica Neue", Helvetica, sans-serif;
    }

    .simple-marquee-container {
        width: 100%;
        background: #FFF;
        float: left;
        overflow: hidden;
        box-sizing: border-box;
        height: 35px;
        position: relative;
        cursor: pointer;
    }

        .simple-marquee-container .marquee-sibling {
            padding: 0;
            background: rgb(61, 61, 61);
            width: 15%;
            height: 35px;
            line-height: 35px;
            font-size: 12px;
            font-weight: normal;
            color: #ffffff;
            text-align: center;
            float: left;
            left: 0;
            z-index: 2000;
        }

        .simple-marquee-container .marquee,
        .simple-marquee-container *[class^="marquee"] {
            display: inline-block;
            white-space: nowrap;
            position: absolute;
        }

        .simple-marquee-container .marquee {
            margin-left: 25%;
        }

        .simple-marquee-container .marquee-content-items {
            display: inline-block;
            padding: 5px;
            margin: 0;
            height: 45px;
            position: relative;
        }

            .simple-marquee-container .marquee-content-items li {
                display: inline-block;
                line-height: 25px;
                color: #000;
            }

                .simple-marquee-container .marquee-content-items li:after {
                    content: "|";
                    margin: 0 1em;
                }
</style>


<link href="~/Content/AdminDashboard/plugins/flag-icon-css/css/flag-icon.css" rel="stylesheet" />
<link href="~/Content/AdminDashboard/plugins/flag-icon-css/css/flag-icon.min.css" rel="stylesheet" />

</head>
<body>
<!-- Header -->
<header class="header-v4">
    <!-- Header desktop -->
    <div class="container-menu-desktop">
        <!-- Topbar -->
        <div class="top-bar" style="background-color:#0098d0;">
            <div class="content-topbar flex-sb-m h-full container">
                <div class="left-top-bar" style="color:#404553;font-weight:bold; font-size:15px;">
                    @{
                        foreach (var i in LanguageMang.AvailableLanguages)
                        {
                            var lan = "";
                            if (i.LanguageFullName.Equals("English"))
                            {
                                lan = "English";
                                <span class="flag-icon flag-icon-us mx-2"></span>
                            }
                            else
                            {
                                lan = "عربي";
                                <span class="flag-icon flag-icon-eg mx-2"></span>
                            }
                            @Html.ActionLink(lan, "ChangeLanguage", "Home", new { lang = i.LanguageCultureName, returnUrl = @Request.Url.AbsoluteUri }, new { @style="color:black"})
                        }
                    }
                </div>

                <div class="right-top-bar flex-w h-full">
                    @if (user.IsSupplier == false)
                    {
                        <a href="/Customer/EditCustomerProfile" class="flex-c-m trans-04 p-lr-25" style="color:black;">
                            @Resource.MyAccount
                        </a>
                    }
                </div>
            </div>
        </div>

        <div class="wrap-menu-desktop how-shadow1" style="background-color:#0098d0;">
            <nav class="limiter-menu-desktop container" >

                <!-- Logo desktop -->
                <a href="/Home/Index" class="logo">
                    <img src="~/Images/BIG LOGO@100x.png" alt="IMG-LOGO">
                </a>

                <!-- Menu desktop -->
                <div class="menu-desktop">
                    <ul class="main-menu">

                        @if (user.RoleID == "3")
                        {
                            <li>
                                <a href="/Home/Index">@Resource.Home</a>
                            </li>
                            <li>
                                <a href="/Products/Index">@Resource.Shop</a>
                            </li>

                            <li class="label1" data-label1="@Resource.hot">
                                <a href="/Products/Discounts">@Resource.Offers</a>
                            </li>

                            <li>
                                <a href="/About/About">@Resource.About</a>
                            </li>

                            <li>
                                <a href="/About/ContentPage">@Resource.Contact</a>
                            </li>
                            <li>
                                <a href="/Customer/GetOrders">@Resource.MyOrders</a>
                            </li>
                        }

                        else
                        {


                            if (IsAccepted)
                            {
                                <li class="nav-item">
                                    <a class="nav-link" href="/SupplierCorporation/CompanyProducts/@SupplierCompanyID">
                                        @Resource.Products
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/SupplierCorporation/CompanyOrders/@SupplierCompanyID">
                                        @Resource.MyOrders <i class="fa fa-exclamation-circle text-info" aria-hidden="true"></i>
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/FWYBrands/Index">
                                        @Resource.Brands
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/FWYUnits/Index">
                                        @Resource.Units
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/FWYColors/Index">
                                        @Resource.Colors
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/Sizes/Index">
                                        @Resource.Sizes
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/FWYCoupons/Index">
                                        @Resource.Coupons
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/FWYStores/Index">
                                        @Resource.Stores
                                    </a>
                                </li>
                            }
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    @Resource.Settings <span class="product-num shadow-none text-primary">
                                        <i class="fa fa-exclamation-circle" aria-hidden="true"></i>
                                    </span>
                                </a>
                                <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                    <a class="dropdown-item" href="/SupplierCorporation/CompanyProfile/@SupplierCompanyID">@Resource.MyAccount</a>
                                    <a class="dropdown-item" href="/SupplierCorporation/EditSupProfile">@Resource.EditProfile</a>
                                </div>

                            </li>
                        }
                    </ul>
                </div>

                <!-- Icon header -->
                <div class="wrap-icon-header flex-w flex-r-m" id="RefreshDiv">
                    @if (user.RoleID == "3")
                    {
                        <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" id="display-cart" data-notify="@TagHelper.CountCookiesCollection(Request.Cookies["Cart"]).Count">
                            <i class="zmdi zmdi-shopping-cart"></i>
                        </div>

                        <a href="#" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" id="display-Fav" data-notify="@TagHelper.CountCookiesCollection(Request.Cookies["Fav"]).Count">
                            <i class="zmdi zmdi-favorite-outline"></i>
                        </a>
                    }
                    <div class="dropdown">
                        <a style="color:black;" class="nav-link dropdown-toggle  waves-effect waves-light" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                            <i class="fa fa-bell notify-icon"></i>
                            <span class="badge badge-danger rounded-circle noti-icon-badge">@Notifications.Where(c => c.IsRead == false).ToList().Count</span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-right dropdown-lg">

                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5 class="m-0">
                                    <span class="float-right">
                                        <a href="" class="text-dark">
                                        </a>
                                    </span>@Resource.Notifications
                                </h5>
                            </div>

                            <div class="slimscroll noti-scroll" style="height:300px;overflow-y:auto">

                                @foreach (var item in Notifications)
                                {
                                    if (item.IsRead == true)
                                    {
                                        <a class="dropdown-item notify-item" href="@item.DetailsURL">
                                            <div class="notify-icon">
                                                <i class="fa fa-envelope-open-text text-black-50"></i>
                                            </div>
                                            @if (lang == "ar-EG")
                                            {
                                                <p class="notify-details">@item.ArTitle</p>
                                                <p class="text-muted mb-0 user-msg">
                                                    @item.ArDetails
                                                </p>
                                            }
                                            else
                                            {
                                                <p class="notify-details">@item.Title</p>
                                                <p class="text-muted mb-0 user-msg">
                                                    @item.Details
                                                </p>
                                            }

                                        </a>
                                    }
                                    else
                                    {
                                        <a class="dropdown-item notify-item active-pagination1" onclick="SeeNotify('@item.Id', '@item.DetailsURL');">
                                            <div class="notify-icon">
                                                <i class="fa fa-envelope-open-text text-black-50"></i>
                                            </div>
                                            @if (lang == "ar-EG")
                                            {
                                                <p class="notify-details">@item.ArTitle</p>
                                                <p class="text-muted mb-0 user-msg">
                                                    @item.ArDetails
                                                </p>
                                            }
                                            else
                                            {
                                                <p class="notify-details">@item.Title</p>
                                                <p class="text-muted mb-0 user-msg">
                                                    @item.Details
                                                </p>
                                            }
                                        </a>

                                    }

                                }

                            </div>
                            <!-- item-->
                            <div class="dropdown-item noti-title">
                                <h5 class="m-0" style="text-align:center;">
                                    <span class="mx-auto">
                                        <a href="/Notification/UserNotifications" class="text-dark">
                                            @Resource.DisplayAllNotifications
                                        </a>
                                    </span>
                                </h5>
                            </div>
                        </div>

                    </div>
                    <div class="nav-item">
                        <a style="color:black;" href="/Account/LogOff" class="nav-link" role="button"><i class="fa fa-unlock"></i> @Resource.Logout</a>
                    </div>

                </div>
            </nav>
        </div>
    </div>

    <div class="wrap-header-mobile" style="background-color:#0098d0;height:30px;">
        <div class="float-left">
            @{
                foreach (var i in LanguageMang.AvailableLanguages)
                {
                    var lan = "";
                    if (i.LanguageFullName.Equals("English"))
                    {
                        lan = "English";
                        <span class="flag-icon flag-icon-us mx-2"></span>
                    }
                    else
                    {
                        lan = "عربي";
                        <span class="flag-icon flag-icon-eg mx-2"></span>
                    }
                    @*@Html.ActionLink(lan, "ChangeLanguage", "Home", new { lang = i.LanguageCultureName, returnUrl = Request.Url.AbsoluteUri }, null)*@
                }
            }
        </div>
        <div class="float-right" style="width:70%;">
                        
            <div class="dropdown" style="display:inline;width:50%;">
                <a style="color:black;" class="nav-link dropdown-toggle waves-effect waves-light" data-toggle="dropdown" href="#" role="button" aria-haspopup="false" aria-expanded="false">
                    <i class="fa fa-bell notify-icon"></i>
                    <span class="badge badge-danger rounded-circle noti-icon-badge">@Notifications.Where(c => c.IsRead == false).ToList().Count</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right dropdown-lg">

                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h5 class="m-0">
                            <span class="float-right">
                                <a href="" class="text-dark">
                                </a>
                            </span>@Resource.Notifications
                        </h5>
                    </div>

                    <div class="slimscroll noti-scroll" style="height:300px;overflow-y:auto">

                        @foreach (var item in Notifications)
                        {
                            if (item.IsRead == true)
                            {
                                <a class="dropdown-item notify-item" href="@item.DetailsURL">
                                    <div class="notify-icon">
                                        <i class="fa fa-envelope-open-text text-black-50"></i>
                                    </div>
                                    @if (lang == "ar-EG")
                                    {
                                        <p class="notify-details">@item.ArTitle</p>
                                        <p class="text-muted mb-0 user-msg">
                                            @item.ArDetails
                                        </p>
                                    }
                                    else
                                    {
                                        <p class="notify-details">@item.Title</p>
                                        <p class="text-muted mb-0 user-msg">
                                            @item.Details
                                        </p>
                                    }

                                </a>
                            }
                            else
                            {
                                <a class="dropdown-item notify-item active-pagination1" onclick="SeeNotify('@item.Id', '@item.DetailsURL');">
                                    <div class="notify-icon">
                                        <i class="fa fa-envelope-open-text text-black-50"></i>
                                    </div>
                                    @if (lang == "ar-EG")
                                    {
                                        <p class="notify-details">@item.ArTitle</p>
                                        <p class="text-muted mb-0 user-msg">
                                            @item.ArDetails
                                        </p>
                                    }
                                    else
                                    {
                                        <p class="notify-details">@item.Title</p>
                                        <p class="text-muted mb-0 user-msg">
                                            @item.Details
                                        </p>
                                    }
                                </a>

                            }

                        }

                    </div>
                    <!-- item-->
                    <div class="dropdown-item noti-title">
                        <h5 class="m-0" style="text-align:center;">
                            <span class="mx-auto">
                                <a href="/Notification/UserNotifications" class="text-dark">
                                    @Resource.DisplayAllNotifications
                                </a>
                            </span>
                        </h5>
                    </div>
                </div>

            </div>

            <a href="/Account/LogOff" class="flex-c-m trans-04 p-lr-25" style="color:black">
                <i class="fa fa-unlock"></i>
            </a>
        </div>

    </div>



    <!-- Header Mobile -->
    <div class="wrap-header-mobile" style="background-color:#0098d0;">
        <!-- Logo moblie -->
        <div class="logo-mobile">
            <a href="/Home/Index"><img src="~/Images/BIG LOGO@100x.png" alt="IMG-LOGO"></a>
        </div>

        <!-- Icon header -->
        <div class="wrap-icon-header flex-w flex-r-m m-r-15">
            @if (user.RoleID == "3")
            {
                <div class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" id="display-cart" data-notify="@TagHelper.CountCookiesCollection(Request.Cookies["Cart"]).Count">
                    <i class="zmdi zmdi-shopping-cart"></i>
                </div>

                <a href="#" class="icon-header-item cl2 hov-cl1 trans-04 p-l-22 p-r-11 icon-header-noti" id="display-Fav" data-notify="@TagHelper.CountCookiesCollection(Request.Cookies["Fav"]).Count">
                    <i class="zmdi zmdi-favorite-outline"></i>
                </a>
            }

                        
        </div>

        <!-- Button show menu -->
        <div class="btn-show-menu-mobile hamburger hamburger--squeeze">
            <span class="hamburger-box">
                <span class="hamburger-inner"></span>
            </span>
        </div>
    </div>


    <!-- Menu Mobile -->
    <div class="menu-mobile">

        <ul class="main-menu-m" style="background-color:#0098d0;">
            @if (user.RoleID == "3")
            {
                <li>
                    <a href="/Home/Index">@Resource.Home</a>
                </li>
                <li>
                    <a href="/Products/Index">@Resource.Shop</a>
                </li>
                <li class="label1" data-label1="@Resource.hot">
                    <a href="/Products/Discounts">@Resource.Offers</a>
                </li>
                <li>
                    <a href="/About/About">@Resource.About</a>
                </li>
                <li>
                    <a href="/About/ContentPage">@Resource.Contact</a>
                </li>
                <li>
                    <a href="/Customer/GetOrders">@Resource.MyOrders</a>
                </li>
                if (user.IsSupplier == false)
                {
                    <li>
                        <a href="/Customer/EditCustomerProfile" class="flex-c-m trans-04 p-lr-25" style="color:black">
                            @Resource.MyAccount
                        </a>
                    </li>
                }
            }

            else
            {
                <li class="nav-item">
                    <a class="nav-link" href="/SupplierCorporation/CompanyProfile/@SupplierCompanyID">@Resource.MyAccount</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="/SupplierCorporation/EditSupProfile">
                        @Resource.EditProfile
                    </a>
                </li>

                if (IsAccepted)
                {
                    <li class="nav-item">
                        <a class="nav-link" href="/SupplierCorporation/CompanyProducts/@SupplierCompanyID">
                            @Resource.Products
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/SupplierCorporation/CompanyOrders/@SupplierCompanyID">
                            @Resource.MyOrders <i class="fa fa-exclamation-circle text-info" aria-hidden="true"></i>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/FWYBrands/Index">
                            @Resource.Brands
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/FWYUnits/Index">
                            @Resource.Units
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/FWYColors/Index">
                            @Resource.Colors
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/Sizes/Index">
                            @Resource.Sizes
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/FWYCoupons/Index">
                            @Resource.Coupons
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/FWYStores/Index">
                            @Resource.Stores
                        </a>
                    </li>
                }

            }
        </ul>
    </div>

    <!-- Modal Search -->
    <div class="modal-search-header flex-c-m trans-04 js-hide-modal-search">
        <div class="container-search-header">
            <button class="flex-c-m btn-hide-modal-search trans-04 js-hide-modal-search">
                <img src="~/Images/icons/icon-close2.png" alt="CLOSE">
            </button>
            @using (Html.BeginForm("SearchProduct", "Products", FormMethod.Post, new { @class = "wrap-search-header flex-w p-l-15" }))
            {
                <button type="submit" class="flex-c-m trans-04">
                    <i class="zmdi zmdi-search"></i>
                </button>
                <input class="plh3" type="text" name="ProductName" placeholder="Search...">
            }

        </div>
    </div>
</header>

<!-- Cart -->
<div class="wrap-header-cart js-panel-cart">
    <div class="s-full js-hide-cart"></div>

    <div class="header-cart flex-col-l p-l-65 p-r-25">
        <div class="header-cart-title flex-w flex-sb-m p-b-8">
            <span class="mtext-103 cl2">
                @Resource.YourCart
            </span>

            <div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-cart">
                <i class="zmdi zmdi-close"></i>
            </div>
        </div>
        <div id="dvSideShoppingCart">
            @Html.Partial("_SideShoppingCart")
        </div>
    </div>
</div>

<!-- Fav -->
<div class="wrap-header-cart js-panel-Fav">
    <div class="s-full js-hide-Fav"></div>

    <div class="header-cart flex-col-l p-l-65 p-r-25">
        <div class="header-cart-title flex-w flex-sb-m p-b-8">
            <span class="mtext-103 cl2">
                @Resource.YourFavourit
            </span>

            <div class="fs-35 lh-10 cl2 p-lr-5 pointer hov-cl1 trans-04 js-hide-Fav">
                <i class="zmdi zmdi-close"></i>
            </div>
        </div>
        <div id="dvSideFavourit">
            @Html.Partial("_SideFavourit")
        </div>
    </div>
</div>

@*/// Quick View////*@
<div class="wrap-modal1 js-modal1 p-t-60 p-b-20">
    <div class="overlay-modal1 js-hide-modal1"></div>

    <div class="container">
        <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">
            <button class="how-pos3 hov3 trans-04 js-hide-modal1">
                <img src="~/Images/icons/icon-close.png" alt="CLOSE">
            </button>
            <div id="dvProductDetails">
                @* @Html.Partial("_ProductQuickView")*@
            </div>
        </div>
    </div>
</div>

@RenderBody()
<hr />
@if (User.IsInRole("2"))
{
    <!-- Footer -->
    <footer class="bg3 p-t-75 p-b-32">
        <div class="container">
            @if (SupplierID == "")
            {
                <div class="row">
                    <div class="col-sm-6 col-lg-3 p-b-50">
                        <h4 class="stext-301 cl0 p-b-30">
                            @Resource.Categories
                        </h4>
                        @{
                            //admin contect
                            FWYContect FWYContect = new FWYContect();
                            if (db.FWYContect.ToList().Count != 0)
                            {
                                FWYContect = db.FWYContect.FirstOrDefault();
                            }

                            //gat
                            List<FWYCategory> Category = new List<FWYCategory>();
                            if (db.FWYCategory.Where(c => c.CategoryID == null).GroupBy(c => c.Name).Select(c => c.FirstOrDefault()).Count() != 0)
                            {
                                if (db.FWYCategory.Where(c => c.CategoryID == null).GroupBy(c => c.Name).Select(c => c.FirstOrDefault()).Count() >= 5)
                                {
                                    Category = db.FWYCategory.Where(c => c.CategoryID == null).GroupBy(c => c.Name).Select(c => c.FirstOrDefault()).Take(5).ToList();
                                }
                                else
                                {
                                    Category = db.FWYCategory.Where(c => c.CategoryID == null).GroupBy(c => c.Name).Select(c => c.FirstOrDefault()).ToList();
                                }
                            }
                            if (Category.Count != 0)
                            {
                                foreach (var item in Category)
                                {
                                    <ul>
                                        <li class="p-b-10">
                                            <a href="/Products/Index" class="stext-107 cl7 hov-cl1 trans-04">
                                                @item.ARName
                                            </a>
                                        </li>
                                    </ul>
                                }
                            }
                        }

                    </div>

                    <div class="col-sm-6 col-lg-3 p-b-50">
                        <h4 class="stext-301 cl0 p-b-30">
                            @Resource.GetInTouch
                        </h4>

                        <p class="stext-107 cl7 size-201">
                            @Resource.Anyquestions :
                            <a href="https://www.google.com/maps/place/@FWYContect.Address" target="_blank">@FWYContect.Address</a> <br />
                            @Resource.CallUs : <strong>@FWYContect.Phone</strong>
                        </p>

                        <div class="p-t-27">
                            @if (FWYContect.Facebook != null)
                            {
                                <a href="@FWYContect.Facebook" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                                    <i class="fa fa-facebook"></i>
                                </a>
                            }
                            @if (FWYContect.Instagram != null)
                            {
                                <a href="@FWYContect.Instagram" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                                    <i class="fa fa-instagram"></i>
                                </a>
                            }
                            @if (FWYContect.Linkedin != null)
                            {
                                <a href="@FWYContect.Linkedin" class="fs-18 cl7 hov-cl1 trans-04 m-r-16">
                                    <i class="fa fa-telegram"></i>
                                </a>
                            }
                        </div>
                    </div>
                </div>
                            }

            <div class="p-t-40">


                <p class="stext-107 cl6 txt-center">
                    <!-- Link back to BagGomla can't be removed. Template is licensed under CC BY 3.0. -->
                    @Resource.Copyright &copy;
                    <script>document.write(new Date().getFullYear());</script> @Resource.Rights <i class="fa fa-heart-o" aria-hidden="true"></i> @Resource.by <a href="https://BagGomla.com" target="_blank">@Resource.Project</a>
                    <!-- Link back to BagGomla can't be removed. Template is licensed under CC BY 3.0. -->

                </p>
            </div>
        </div>
    </footer>

                            }
                            else if (User.IsInRole("2"))
                            {

<!-- Footer -->
                                <footer class="page-footer font-small blue" style="background-color:black; position: fixed;bottom: 0;width: 100%;">

                                    <!-- Copyright -->
                                    <div class="footer-copyright text-center py-3">
                                        @Resource.Copyright &copy;
                                        <script>document.write(new Date().getFullYear());</script> @Resource.Rights <i class="fa fa-heart-o" aria-hidden="true"></i> @Resource.by <a href="https://BagGomla.com" target="_blank">@Resource.Project</a>
                                    </div>
                                    <!-- Copyright -->

                                </footer>
<!-- Footer -->
                            }

<!-- Back to top -->
<div class="btn-back-to-top" id="myBtn">
    <span class="symbol-btn-back-to-top">
        <i class="zmdi zmdi-chevron-up"></i>
    </span>
</div>

@*@Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")*@
@RenderSection("scripts", required: false)
<!--===============================================================================================-->
<script src="~/Content/vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/bootstrap/js/popper.js"></script>

<script src="~/Content/vendor/bootstrap/js/bootstrap.min.js"></script>

<!--===============================================================================================-->
<script src="~/Content/vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/daterangepicker/moment.min.js"></script>
<script src="~/Content/vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/slick/slick.min.js"></script>
<script src="~/Scripts/js/slick-custom.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/parallax100/parallax100.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/MagnificPopup/jquery.magnific-popup.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/isotope/isotope.pkgd.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/sweetalert/sweetalert.min.js"></script>
<!--===============================================================================================-->
<script src="~/Content/vendor/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<!--===============================================================================================-->
<script src="~/Scripts/js/main.js"></script>

<script src="~/Scripts/js/marquee.en.js"></script>

<script>
    $(".js-select2").each(function () {
        $(this).select2({
            minimumResultsForSearch: 20,
            dropdownParent: $(this).next('.dropDownSelect2')
        });
    })

    $(function () {
        $('.simple-marquee-container').SimpleMarquee({
            duration: 99000
        });
    });

</script>

<script>
    $('.parallax100').parallax100();
</script>

<script>
    $('.gallery-lb').each(function () { // the containers for all your galleries
        $(this).magnificPopup({
            delegate: 'a', // the selector for gallery item
            type: 'image',
            gallery: {
                enabled: true
            },
            mainClass: 'mfp-fade'
        });
    });
</script>

<script>
    $('.js-addwish-b2, .js-addwish-detail').on('click', function (e) {
        e.preventDefault();
    });


    $('.js-addwish-b2').each(function () {
        var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
        $(this).on('click', function () {
            swal(nameProduct, "is added to wishlist !", "success");

            $(this).addClass('js-addedwish-b2');
            $(this).off('click');
        });
    });

    //$('.js-addedwish-b2').each(function () {
    //    var nameProduct = $(this).parent().parent().find('.js-name-b2').html();
    //    $(this).on('click', function () {
    //        swal(nameProduct, "is Removed to wishlist !", "success");
    //        $(this).removeClass('js-addedwish-b2');
    //        $(this).addClass('js-addwish-b2');
    //        $(this).off('click');
    //    });
    //});


    $('.js-addwish-detail').each(function () {
        var nameProduct = $(this).parent().parent().parent().find('.js-name-detail').html();

        $(this).on('click', function () {
            swal(nameProduct, "is added to wishlist !", "success");

            $(this).addClass('js-addedwish-detail');
            $(this).off('click');
        });
    });


    /*---------------------------------------------*/

    $('.js-addcart-detail').each(function () {
        var nameProduct = $(this).parent().parent().parent().parent().find('.js-name-detail').html();
        //$(this).on('click', function () {
        //    swal(nameProduct, "is added to cart !", "success");
        //});
    });

</script>


<script>
    $('.js-pscroll').each(function () {
        $(this).css('position', 'relative');
        $(this).css('overflow', 'hidden');
        var ps = new PerfectScrollbar(this, {
            wheelSpeed: 1,
            scrollingThreshold: 1000,
            wheelPropagation: false,
        });

        $(window).on('resize', function () {
            ps.update();
        })
    });
</script>


<script>

    function AddFav(ProductID) {
        $.ajax({
            url: '@Url.Action("AddFavorite", "Products")',
            type: 'GET',
            data: { ProductID: ProductID, quantity: 1 }
        }).done(function (result) {
            $("#RefreshDiv").load(window.location.href + " #RefreshDiv");
            $("#FavDiv").load(window.location.href + " #FavDiv");

            //$("#RnDiv").load(window.location.href + " #RnDiv");
        });
    }

    function RemoveFav(ProductID) {
        $.ajax({
            url: '@Url.Action("RemoveFavorite", "Products")',
            type: 'GET',
            data: { ProductID: ProductID }
        }).done(function (result) {
            $("#RefreshDiv").load(window.location.href + " #RefreshDiv");
            window.location.href = "";
        });
    }

    function AddCart(ProductID) {
        var ProductSizeID = document.getElementById("ProductSizeID");
        var ProductColorID = document.getElementById("ProductColorID");
        var ColorID = -1;
        var SizeID = -1;
        if (ProductSizeID != null) {
            SizeID = ProductSizeID.options[ProductSizeID.selectedIndex].value;
        }
        if (ProductColorID != null) {
            ColorID = ProductColorID.options[ProductColorID.selectedIndex].value
        }

        var QTY = document.getElementById("QV_Qty").value;
        if (ColorID == 0 || SizeID == 0) {
            if (ColorID == 0) {
                $("#msgProductColorID").show();
            }
            else {
                $("#msgProductColorID").hide();
            }
            if (SizeID == 0) {
                $("#msgProductSizeID").show();
            }
            else {
                $("#msgProductSizeID").hide();
            }
        }
        else {
            if (ColorID == -1)
                ColorID = 0;
            if (SizeID == -1)
                SizeID = 0
            $.ajax({
                url: '@Url.Action("AddCart", "Products")',
                type: 'GET',
                data: { ProductID: ProductID, quantity: QTY, SizeID: SizeID, colorID: ColorID }
            }).done(function (result) {
                $("#RefreshDiv").load(window.location.href + " #RefreshDiv");
                $("#dvSideShoppingCart").load(window.location.href + " #dvSideShoppingCart");
                swal("Successed", "Data Saved Successfully", "success");
                $('.js-modal1').removeClass('show-modal1');
            });
        }

    }

    function RemoveCart(ProductID) {
        $.ajax({
            url: '@Url.Action("RemoveCart", "Products")',
            type: 'GET',
            data: { ProductID: ProductID }
        }).done(function (result) {
            $("#RefreshDiv").load(window.location.href + " #RefreshDiv");
        });
    }

    $(document).on("click", "#display-cart", function () {
        $('.js-panel-cart').addClass('show-header-cart');
    });

    $(document).on("click", "#display-Fav", function () {
        $('.js-panel-Fav').addClass('show-header-cart');
    });

    //$(document).on("click", "#display-quick-view", function () {
    //    $('.js-modal1').addClass('show-modal1');
    //});
    function ViewProduct(ProductID) {
        $.ajax({
            url: '@Url.Action("ProductQuickView", "Products")',
            type: 'GET',
            cache: false,
            data: { ID: ProductID }
        }).done(function (result) {
            $('#dvProductDetails').empty();
            $('#dvProductDetails').html(result);
            $('.wrap-slick3').each(function () {
                $(this).find('.slick3').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    fade: true,
                    infinite: true,
                    autoplay: false,
                    autoplaySpeed: 6000,

                    arrows: true,
                    appendArrows: $(this).find('.wrap-slick3-arrows'),
                    prevArrow: '<button class="arrow-slick3 prev-slick3"><i class="fa fa-angle-left" aria-hidden="true"></i></button>',
                    nextArrow: '<button class="arrow-slick3 next-slick3"><i class="fa fa-angle-right" aria-hidden="true"></i></button>',

                    dots: true,
                    appendDots: $(this).find('.wrap-slick3-dots'),
                    dotsClass: 'slick3-dots',
                    customPaging: function (slick, index) {
                        var portrait = $(slick.$slides[index]).data('thumb');
                        return '<img src=" ' + portrait + ' "/><div class="slick3-dot-overlay"></div>';
                    },
                });
            });
        });
        $('.js-modal1').addClass('show-modal1');
    }
</script>

<script>
    function SeeNotify(ID, returnUrl) {
        $.ajax({
            url: '@Url.Action("SeeNotify", "Home")',
            type: 'GET',
            cache: false,
            data: { ID: ID },
            datatype: "json",
            contenttype: "application/json",
        }).done(function (result) {
            window.location.href = returnUrl;
        });
    }
</script>

</body>
</html>
